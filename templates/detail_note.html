{% extends 'base.html' %} {% block title %}{{ note.title }}{% endblock %} {%
block head %} {{ mde.css }} {% endblock %} {% block body %}
<div class="container-fluid">
    <div class="note-info container mt-4">
        <div class="d-md-flex justify-content-center">
            <h2 class="note-title">{{ note.title }}</h2>
            {% if note.tags != "" %}
            <p class="note-tags m-0 mt-2 ms-md-4">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="23"
                    height="23"
                    fill="currentColor"
                    class="bi bi-tags-fill"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M2 1a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7-7A1 1 0 0 0 6.586 1H2zm4 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"
                    />
                </svg>
                {% for tag in note.tags.split(" ") %} #{{ tag }} {% endfor %}
            </p>
            {% endif %}
        </div>
        <div class="mb-2 d-md-flex justify-content-center">
            <p class="mb-0 me-md-3">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="bi bi-calendar2-check-fill"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zm9.954 3H2.545c-.3 0-.545.224-.545.5v1c0 .276.244.5.545.5h10.91c.3 0 .545-.224.545-.5v-1c0-.276-.244-.5-.546-.5zm-2.6 5.854a.5.5 0 0 0-.708-.708L7.5 10.793 6.354 9.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"
                    />
                </svg>
                {{ note.entry_date.strftime('%b, %d %Y') }}
            </p>
            <p class="mb-0 me-md-3">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="bi bi-archive-fill"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M12.643 15C13.979 15 15 13.845 15 12.5V5H1v7.5C1 13.845 2.021 15 3.357 15h9.286zM5.5 7h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zM.8 1a.8.8 0 0 0-.8.8V3a.8.8 0 0 0 .8.8h14.4A.8.8 0 0 0 16 3V1.8a.8.8 0 0 0-.8-.8H.8z"
                    />
                </svg>
                {% if note.category %} {{ note.category.name }} {% endif %}
            </p>
            <button id="edit-btn" class="btn btn-link p-0 me-md-3">Edit</button
            ><br />
            <button class="btn delete-note-btn p-0">
                <a href="/delete_note/{{ note.note_id }}" class="delete-note"
                    >Delete {{ note.title }}</a
                >
            </button>
        </div>
    </div>
    <div id="md-viewer" class="mt-2 m-md-5 justify-content-center">
        <div class="make-pretty">{{ content|safe }}</div>
    </div>
    <div id="edit_note" class="row m-md-5" hidden>
        <div class="col-md-6">
            <div class="note-container mt-3">
                <p>Viewer</p>
                <hr />
                {{ mde.preview }}
            </div>
        </div>
        <div class="col-md-6">
            <div class="note-container mt-3">
                <form action="/edit_note" method="POST">
                    <input
                        type="hidden"
                        value="{{ note.note_id }}"
                        name="note_id"
                    />
                    <div class="mt-3">
                        <div class="form-group mb-2">
                            <input
                                type="text"
                                name="note_title"
                                class="form-control"
                                placeholder="Title"
                                value="{{ note.title }}"
                                required
                            />
                        </div>
                        <div class="form-group mb-2">
                            <select
                                name="note_category"
                                class="form-select"
                                required
                            >
                                <option value="" disabled selected>
                                    Select this note's category
                                </option>
                                {% for category in categories %} {% if
                                category.user.email == session.user.email %}
                                <option value="{{ category.category_id }}">
                                    {{ category.name }}
                                </option>
                                {% endif %} {% endfor %}
                            </select>
                        </div>
                        <div class="form-group mb-2">
                            <input
                                type="text"
                                name="tags"
                                class="form-control"
                                placeholder="Tags"
                                value="{{ note.tags }}"
                            />
                        </div>
                    </div>
                    <label>Text:</label>
                    {{ form.csrf_token }} {{ mde.editor(name="body_content",
                    default=note.body_content) }}
                    <input
                        type="submit"
                        value="Submit"
                        class="btn btn-primary mt-2"
                    />
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    document.querySelector("#edit-btn").addEventListener("click", () => {
        document.querySelector("#md-viewer").toggleAttribute("hidden");
        document.querySelector("#edit_note").toggleAttribute("hidden");
    });
</script>
<script src="/static/js/TagPage.jsx" type="text/jsx"></script>
<script src="/static/js/Tags.jsx" type="text/jsx"></script>
{{ mde.js }} {% endblock %}
